---
import H4 from "./text/H4.astro"
import P from "./text/P.astro"
import Github from "../icons/Github.astro"
import Goto from "../icons/Goto.astro"
import { Image } from "astro:assets"
import NewTabLink from "./NewTabLink.astro"

interface Props {
	title: string
	description: string
	tags: string[]
	github: string | null
	website: string | null
	image: ImageMetadata
	index: number
}

const { title, description, tags, github, website, image, index } = Astro.props
const isEven = index % 2 === 0
---

<div class="relative hidden lg:block">
	{/* Image Container */}
	<NewTabLink
		href={website || github || "#"}
		className={`group relative block overflow-hidden rounded ${isEven ? "" : "ml-auto"} w-3/5`}
		ariaLabel={`View ${title} project`}
	>
		<Image
			src={image}
			alt={title}
			class="w-full object-contain transition-transform duration-300"
			loading="lazy"
		/>
		<div
			class="bg-accent/30 absolute inset-0 transition-opacity duration-300 group-hover:opacity-0"
		>
		</div>
	</NewTabLink>

	{/* Content Overlay */}
	<div
		class={`absolute top-0 flex h-full w-2/3 xl:1/2 items-center ${isEven ? "right-0" : "left-0"} pointer-events-none`}
	>
		<div
			class={`flex gap-2 flex-col *:pointer-events-auto ${isEven ? "items-end text-right" : "items-start text-left"}`}
		>
			<P accent>Featured Project</P>

			<NewTabLink
				href={website || github || "#"}
				ariaLabel={`View ${title} project`}
			>
				<H4
					className="hover:text-accent transition-colors duration-200 hover:cursor-pointer"
					large
				>
					{title}
				</H4>
			</NewTabLink>

			<div class="bg-panel-background my-4 rounded p-6 shadow-lg">
				<P small className="text-subdued">
					{description}
				</P>
			</div>

			<div class="flex flex-wrap gap-2">
				{
					tags.map((tag) => (
						<span class="text-muted text-xs font-light xl:text-sm">
							{tag}
						</span>
					))
				}
			</div>

			<div class="mt-2 flex gap-4">
				{
					github && (
						<NewTabLink
							href={github}
							className="text-muted hover:text-accent transition-colors duration-200"
							ariaLabel="View on GitHub"
						>
							<Github class="h-7 w-7" />
						</NewTabLink>
					)
				}
				{
					website && (
						<NewTabLink
							href={website}
							className="text-muted hover:text-accent transition-colors duration-200"
							ariaLabel="Visit website"
						>
							<Goto class="h-7 w-7" />
						</NewTabLink>
					)
				}
			</div>
		</div>
	</div>
</div>
